<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT,guchenghao,computer,code,programmer" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="不会放电的皮卡丘">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="不会放电的皮卡丘">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不会放电的皮卡丘">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6251429031124665000,
      author: '主编大人'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> 不会放电的皮卡丘 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?66eb6a4b3c24ef6d6d1601ed2cba29a2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">不会放电的皮卡丘</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Coder Life</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/31/Selenium/" itemprop="url">
                  Selenium
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-31T11:10:48+08:00" content="2016-07-31">
              2016-07-31
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/31/Selenium/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/31/Selenium/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Selenium_u7684_u7B80_u4ECB"><a href="#Selenium_u7684_u7B80_u4ECB" class="headerlink" title="Selenium的简介"></a>Selenium的简介</h2><p>Selenium 是 thoughtworks公司的一个集成测试的强大工具 <a href="http://seleniumhq.org/" title="Selenium官网" target="_blank" rel="external">Selenium</a>,他又几个部分，Selenium IDE是一个录制工具，他可以录制操作，并且可以自动产生各种语言的代码，<strong>Selenium IDE是一个FireFox插件，目前只能运行在FireFox浏览器</strong></p>
<p><img src="http://ob5vyu5k2.bkt.clouddn.com/chapt3_img01_IDE_Installation.png" alt="Selenium下载"></p>
<hr>
<h2 id="Selenium_u7684_u5B89_u88C5_u4EE5_u53CA_u57FA_u672C_u4F7F_u7528"><a href="#Selenium_u7684_u5B89_u88C5_u4EE5_u53CA_u57FA_u672C_u4F7F_u7528" class="headerlink" title="Selenium的安装以及基本使用"></a>Selenium的安装以及基本使用</h2><blockquote>
<p>主要参考<a href="http://docs.seleniumhq.org/docs/02_selenium_ide.jsp" title="Selenium的官方Docs" target="_blank" rel="external">Selenium的官方文档</a>（英文好的童鞋可以看看^_^）<br>selenium比较适合进行web的功能测试</p>
</blockquote>
<ul>
<li>IDE：下载selenium，可以去Selenium的官网下载，也可以到火狐浏览器的附加组件中下载,直接搜索selenium，然后下载Selenium IDE</li>
</ul>
<p><img src="http://ob5vyu5k2.bkt.clouddn.com/chapt3_img05_IDE_open.png" alt="Selenium IDE"></p>
<ul>
<li>单机版：可以参考<a href="http://www.programgo.com/article/26512391572/" target="_blank" rel="external">selenium+php的本地部署</a>以及<a href="http://blog.csdn.net/e421083458/article/details/8290229" target="_blank" rel="external">phpnuit+slenium的部署</a></li>
<li>下载了之后，Selenium IDE 主要由以下几部分组成：<ul>
<li>Base URL ：这一栏是用来填写测试时所使用的页面的url<ul>
<li>ToolBar：提供了一套测试用的按钮，在最右边的红色按钮，是录制按钮，点击之后，可以进行脚本的录制</li>
<li>Test Case Pane：是一个表格型的面板，有三个head，分别是<strong>command、target、value</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>在面板下面，有一个用于选择命令的一组控件，可以选择命令以及相应的target，同时也可以设置value的值，一般在测试用例自动运行时使用</p>
<p><img src="http://ob5vyu5k2.bkt.clouddn.com/chapt3_img16_Table_Format.png" alt="Test Pane"></p>
<ul>
<li><p>Log/Reference/UI-Element/Rollup Pane：</p>
<ol>
<li>log ：是运行时输出日志，可以在里面查看每行运行的状况</li>
<li><p>Reference：可以查看Selenium测试中command的api相关信息</p>
<p><img src="http://ob5vyu5k2.bkt.clouddn.com/chapt3_img18_Bottom_Box.png" alt="Box"></p>
</li>
</ol>
</li>
</ul>
<h2 id="Selenium_u7684_u4E2D_u6587_u624B_u518C"><a href="#Selenium_u7684_u4E2D_u6587_u624B_u518C" class="headerlink" title="Selenium的中文手册"></a>Selenium的中文手册</h2><blockquote>
<p>学习Selenium工具之前，需要一定的path的知识，学习path可以去W3CSchool的官网进行学习，也可以参考<a href="http://www.cnblogs.com/jianjialin/archive/2009/02/01/1382056.html" target="_blank" rel="external">xpath学习</a></p>
</blockquote>
<ol>
<li>Commands (命令)</li>
</ol>
<ul>
<li>Action<br>  对当前状态进行操作<br>  失败时，停止测试</li>
<li>Assertion<br>  校验是否有产生正确的值</li>
<li>Element Locators<br>  指定HTML中的某元素</li>
<li>Patterns<br>  用于模式匹配</li>
</ul>
<ul>
<li>Element Locators (元素定位器)<ul>
<li>id=id<br>  id locator 指定HTML中的唯一id的元素</li>
<li>name=name<br>  name locator指定 HTML中相同name的元素中的第一个元素</li>
<li>identifier=id<br>  identifier locator 首先查找HTML是否存在该id的元素, 若不存在，查找第一个该name的元素</li>
<li>dom=javascriptExpression<br>  dom locator用JavaScript表达式来定位HTML中的元素,注意必须要以”document”开头<br>  例如:<br>  dom=document.forms<a href="">‘myForm’</a>.myDropdown<br>  dom=document.images<a href="">56</a></li>
<li>xpath=xpathExpression<br>  xpath locator用 XPath 表达式来定位HTML中的元素,必须注意要以”//“开头<br>  例如：<br>  xpath=//img<a href="">@alt=’The image alt text’</a><br>  xpath=//table<a href="">@id=’table1’</a>//tr<a href="">4</a>/td<a href="">2</a></li>
<li>link=textPattern<br>  link locator 用<strong>link来选择HTML中的连接或锚元素</strong><br>  例如:<br>  link=The link text</li>
<li>在没有locator前序的情况下 Without a locatorprefix,Selenium uses:<br>  如果以”document.”开头，则默认是使用 dom locator，如果是以”//“开头，则默认使用xpath locator,其余情况均认作identifier locator</li>
</ul>
</li>
<li>String Matching Patterns (字符串匹配模式)<ul>
<li>glob:patthern<br>  <strong>glob模式</strong>，用通配符“*”代表任意长度字符，”?”代表一个字符</li>
<li>regexp:regexp<br>  <strong>正则表达式模式</strong>，用JavaScript正则表达式的形式匹配字符串</li>
<li>exact:string<br>  <strong>精确匹配模式</strong>，精确匹配整个字符串，不能用通配符，在没有指定字符串匹配前序的时候，selenium 默认使用golb 匹配模式</li>
</ul>
</li>
<li>Select Option Specifiers (Select选项指定器)<ul>
<li>label=labelPattern<br>  通过匹配选项中的文本指定选项<br>  例如：label=regexp:^<a href="">Oo</a>ther</li>
<li>value=valuePattern<br>  通过匹配选项中的值指定选项<br>  例如：value=other</li>
<li>id=id<br>  通过匹配选项的id指定选项<br>  例如: id=option1</li>
<li>index=index<br>  通过匹配选项的序号指定选项，序号从0开始<br>  例如：index=2<br>  在没有选项选择前序的情况下，默认是匹配选项的文本</li>
</ul>
</li>
</ul>
<ol>
<li>Actions<br>描述了用户所会作出的操作。<br>Action 有两种形式: action和actionAndWait, action会立即执行，而actionAndWait会假设需要较长时间才能得到该action的相响，而作出等待，open则是会自动处理等待时间。</li>
</ol>
<ul>
<li><p>click<br>  click(elementLocator)</p>
<ul>
<li>点击连接,按钮，复选和单选框</li>
<li>如果点击后需要等待响应，则用”clickAndWait”</li>
<li>如果是需要经过JavaScript的alert或confirm对话框后才能继续操作，则需要调用verify或assert来告诉Selenium你期望对对话框进行什么操作。  <ul>
<li>open<br>open(url)</li>
</ul>
<ul>
<li>在浏览器中打开URL,可以接受相对和绝对路径两种形式</li>
<li>注意：该URL必须在与浏览器相同的安全限定范围之内</li>
</ul>
</li>
</ul>
<ul>
<li><p>type<br> type(inputLocator, value)</p>
<ul>
<li>模拟人手的输入过程，往指定的input中输入值</li>
<li>也适合给复选和单选框赋值</li>
<li>在这个例子中，则只是给钩选了的复选框赋值，注意，而不是改写其文本</li>
</ul>
</li>
<li><p>select<br> select(dropDownLocator, optionSpecifier)</p>
<ul>
<li>根据optionSpecifier选项选择器来选择一个下拉菜单选项</li>
<li>如果有多于一个选择器的时候，如在用通配符模式，如”fb”,或者超过一个选项有相同的文本或值，则会选择第一个匹配到的值</li>
</ul>
</li>
<li><p>selectWindow<br> select(windowId)</p>
<ul>
<li>选择一个弹出窗口</li>
<li>当选中那个窗口的时候，所有的命令将会转移到那窗口中执行</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>pause<br>  pause(millisenconds)<ul>
<li>根据指定时间暂停Selenium脚本执行</li>
<li>常用在调试脚本或等待服务器段响应时       <ul>
<li>fireEvent<br>fireEvent(elementLocatore,evenName)<br>模拟页面元素事件被激活的处理动作</li>
<li>waitForCondition<br>waitForCondition(JavaScriptSnippet,time)</li>
</ul>
<ul>
<li>在限定时间内，等待一段JavaScript代码返回true值，超时则停止等待</li>
</ul>
<ul>
<li>waitForCondition<br>var value=selenium.getText(“foo”); value.match(/bar/);<br>3000</li>
<li>waitForValue<br>waitForValue(inputLocator, value)</li>
</ul>
</li>
<li>等待某input(如hidden input)被赋予某值，<ul>
<li>会轮流检测该值，所以要注意如果该值长时间一直不赋予该input该值的话，可能会导致阻塞       </li>
</ul>
<ul>
<li>store,stroreValue<br>store(valueToStore, variablename)<br>保存一个值到变量里。<br>该值可以由自其他变量组合而成或通过JavaScript表达式赋值给变量</li>
<li>storeText, storeAttribute<br>storeText(elementLocator, variablename)<br>把指定元素的文本值赋予给变量<br>$.｛expectedStartDate｝<br>storeAttribute(.｛｝elementLocator@attributeName,variableName.｛｝)<br>把指定元素的属性的值赋予给变量</li>
<li>chooseCancel.., answer..<br>chooseCancelOnNextConfirmation()</li>
</ul>
<ul>
<li>当下次JavaScript弹出confirm对话框的时候,让selenium选</li>
</ul>
<ul>
<li>Cancel</li>
</ul>
</li>
<li>如果没有该命令时，遇到confirm对话框Selenium默认返回true，如手动选择OK按钮一样<br>-如果已经运行过该命令，当下一次又有confirm对话框出现时，也会同样地再次选择Cancel<br>answerOnNextPrompt(answerString)  <ul>
<li>在下次JavaScript弹出prompt提示框时，赋予其anweerString的值，并选择确定</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol>
<li>Assertions<br>允许用户去检查当前状态。两种模式: Assert 和 Verify， 当Assert失败，则退出测试；当Verify失败，测试会继续运行。</li>
</ol>
<ul>
<li>assertLocation, assertTitle<br>  assertLocation(relativeLocation)<br>  判断当前是在正确的页面<br>  assertTitle(titlePattern)<br>  检查当前页面的title是否正确</li>
<li><p>assertValue<br>   assertValue(inputLocator, valuePattern)</p>
<ul>
<li>检查input的值</li>
<li>对于 checkbox或radio，如果已选择，则值为”on”,反之为”off”<ul>
<li>assertSelected, assertSelectedOptions<br>assertSelected(selectLocator, optionSpecifier)<br>检查select的下拉菜单中选中的选型是否和optionSpecifer(Select选择选项器)的选项相同</li>
<li>assertSelectOptions(selectLocator, optionLabelList)</li>
</ul>
<ul>
<li>检查下拉菜单中的选项的文本是否和optionLabelList相同</li>
</ul>
</li>
<li>optionLabelList是以逗号分割的一个字符串</li>
</ul>
<ul>
<li>assertText<br> assertText(elementLocator,textPattern)<ul>
<li>检查指定元素的文本<ul>
<li>只对有包含文本的元素生效</li>
<li>对于Mozilla类型的浏览器，用textContent取元素的文本，对于IE类型的浏览器，用innerText取元素文本</li>
</ul>
</li>
</ul>
</li>
<li><p>assertTextPresent, assertAttribute<br>assertTextPresent(text)<br>检查在当前给用户显示的页面上是否有出现指定的文本</p>
</li>
<li><p>assertAttribute(.｛｝elementLocator@attributeName.｛｝, ValuePattern)<br> 检查当前指定元素的属性的值</p>
</li>
<li><p>assertTable<br> assertTable(cellAddress, valuePattern)</p>
<ul>
<li>检查table里的某个cell中的值</li>
<li>cellAddress的语法是tableName.row.column, 注意行列序号都是从0开始</li>
</ul>
</li>
<li><p>assertVisible, nonVisible<br>assertVisible(elementLocator)</p>
<ul>
<li>检查指定的元素是否可视的</li>
<li>隐藏一个元素可以用设置css的’visibility’属性为’hidden’，也可以设置’display’属性为’none’</li>
</ul>
</li>
<li><p>assertEditable(inputLocator)<br>检查指定的input是否可以编辑</p>
</li>
</ul>
</li>
<li><p>assertNotEditable(inputLocator)<br>  检查指定的input是否不可以编辑</p>
</li>
<li>assertAlert<br>  assertAlert(messagePattern)<ul>
<li>检查JavaScript是否有产生带指定message的alert对话框</li>
<li>alert产生的顺序必须与检查的顺序一致</li>
<li>检查alert时会产生与手动点击’OK’按钮一样的效果。如果一个alert产生了，而你却没有去检查它，selenium会在下个action中报错。</li>
<li>注意：Selenium 不支持 JavaScript 在onload()事件时 调用alert();在这种情况下，Selenium需要你自己手动来点击OK.</li>
</ul>
</li>
<li>assertConfirmation<br>  assertConfirmation(messagePattern)<ul>
<li>检查JavaScript是否有产生带指定message的confirmation对话框和alert情况一样，confirmation对话框也必须在它们产生的时候进行检查</li>
<li>默认情况下，Selenium会让confirm() 返回true, 相当于手动点击Ok按钮的效果。你能够通过chooseCancelOnNextConfirmation命令让confirm()返回false.同样地，如果一个cofirmation对话框出现了，但你却没有检查的话，Selenium将会在下个action中报错</li>
<li>注意：在Selenium的环境下，confirmation对话框框将不会再出现弹出显式对话框</li>
<li>注意：Selenium不支持在onload()事件时调用confirmation对话框，在这种情况下，会出现显示confirmatioin对话框，并需要你自己手动点击。</li>
</ul>
</li>
<li>assertPrompt<br>  assertPrompt(messagePattern)<ul>
<li>检查JavaScript是否有产生带指定message的Prompt对话框</li>
<li>你检查的prompt的顺序Prompt对话框产生的顺序必须相同</li>
<li>必须在verifyPrompt之前调用answerOnNextPrompt命令</li>
<li>如果prompt对话框出现了但你却没有检查，则Selenium会在下个action中报错</li>
</ul>
</li>
</ul>
<ol>
<li>Parameters and Variables<br>参数和变量的声明范围由简单的赋值到JavaScript表达式赋值。<br>Store，storeValue 和storeText 为下次访问保存值。<br>在Selenium内部是用一个叫storeVars的map来保存变量名。</li>
</ol>
<ul>
<li><p>Variable Substitution 变量替换<br>  提供了一个简单的方法去访问变量,语法 $.｛xxx｝</p>
<ul>
<li>JavaScript Evaluation JavaScript赋值<br>  你能用JavaScript来构建任何你所需要的值。<br>  这个参数是以javascript开头，语法是 javascript.｛’with a trailing’｝。<br>  可以通过JavaScript表达式给某元素赋值。</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/./images/avatar.jpg"
               alt="guchenghao" />
          <p class="site-author-name" itemprop="name">guchenghao</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">1</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/guchenghao" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/guchenghao66" target="_blank" title="Facebook">
                  
                    <i class="fa fa-fw fa-facebook"></i>
                  
                  Facebook
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.instagram.com/gch.alex/" target="_blank" title="Instagram">
                  
                    <i class="fa fa-fw fa-instagram"></i>
                  
                  Instagram
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/gu-cheng-hao-12" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-fw fa-zhihu"></i>
                  
                  Zhihu
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">guchenghao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"guchenghao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
